sky.define("./widget/page",["./dom/dom"],function(t,i){var s=t("dom");function r(){this[Array.prototype.shift.call(arguments)].apply(this,arguments);return false}var e="首页",n="上一页",a="下一页",h="末页",u="跳转";var o={onkeypress:function(){var t=s.getEvent();if(t.code==13){s.emit(this.nextSibling,"click");return false}if(t.code<48||t.code>57){t.preventDefault();return false}},onkeyup:function(){var t=this.value.trim();if(t){t=Math.abs(parseInt(t))||1;if(t!=this.value){this.value=t}}},onblur:function(){this.value=this.value*1||1}};var p={first:function(){return this.$first=s.create("a",{href:"javascript:void(0);",title:this.Txt_first||e,onclick:sky.bind(r,this,"goFirst"),hidefocus:"true"},"<b>"+(this.Txt_first||e)+"</b>")},previous:function(){return this.$previous=s.create("a",{href:"javascript:void(0);",title:this.Txt_previous||n,onclick:sky.bind(r,this,"goPrevious"),hidefocus:"true"},"<b>"+(this.Txt_previous||n)+"</b>")},next:function(){return this.$next=s.create("a",{href:"javascript:void(0);",title:this.Txt_next||a,onclick:sky.bind(r,this,"goNext"),hidefocus:"true"},"<b>"+(this.Txt_next||a)+"</b>")},last:function(){return this.$last=s.create("a",{href:"javascript:void(0);",title:this.Txt_last||h,onclick:sky.bind(r,this,"goLast"),hidefocus:"true"},"<b>"+(this.Txt_last||h)+"</b>")},txtRank:function(){var t=s.create("span",{className:"pENum"},'<span class="pENum2"></span>');this.$txtRank=t.firstChild;return t},txtIpt:function(){var t=this.Txt_iptbtn||u;var i=s.create("spn",{className:"pEIpt"},'<input type="text" value="'+this.pCurr+'" /><a href="javascript:void(0);" hidefocus="true" class="pEBK"><b>'+t+"</b></a>");var e=i.childNodes;this.$txtIpt=e[0];sky.extra(o,e[0]);e[1].onclick=sky.bind(r,this,"goIpt");return i}};var f={first:function(){this.$first.className=this.pCurr>1?"pEBK pEFir":"pEBK pEFirDis"},previous:function(){this.$previous.className=this.pCurr>1?"pEBK pEPre":"pEBK pEPreDis"},next:function(){this.$next.className=this.pCurr<this.pCount?"pEBK pENxt":"pEBK pENxtDis"},last:function(){this.$last.className=this.pCurr<this.pCount?"pEBK pELst":"pEBK pELstDis"},txtRank:function(){this.$txtRank.innerHTML="";var t=1,i=this.pCount,e=parseInt(this.pCount/2)||1,n=false;if(this.pCount>this.pRank){e=Math.max(Math.floor(this.pRank/2)-1,0)||1;t=this.pCurr-e>0?this.pCurr-e:1;i=t+this.pRank-1;if(i>this.pCount){i=this.pCount;t=i-this.pRank>0?i-this.pRank+1:1}}if(this.pCount-i>0){i-=2;n=true}for(var a=t;a<=i;a+=1){s.create("a",a==this.pCurr?{hidefocus:"true",className:"pESe"}:{hidefocus:"true",href:"javascript:void(0);",onclick:sky.bind(r,this,"goNav",a)},a,this.$txtRank)}if(!n){return}s.create("b",null,"..",this.$txtRank);s.create("a",{href:"javascript:void(0);",hidefocus:"true",onclick:sky.bind(r,this,"goLast")},this.pCount,this.$txtRank)},txtIpt:function(){this.$txtIpt.value=this.pCurr}};var c=i.BaseClass=sky.extend(sky.EventEmitter,{set:function(t,i,s){var r;if(t){if(this.pCount!=t){r=true}this.pCount=t}if(i){if(this.pCurr!=i){r=true}this.pCurr=i}if(s){s=Math.max(s,3);if(this.pRank!=s){r=true}this.pRank=s}r&&this.goRef();return this},goFirst:function(){this.goNav(1);return this},goPrevious:function(){this.goNav(this.pCurr-1);return this},goNext:function(){this.goNav(this.pCurr+1);return this},goLast:function(){this.goNav(this.pCount);return this},goNav:function(t,i){t=t<1?1:t>this.pCount?this.pCount:t;if(!i&&this.pCurr==t){return this}this.pCurr=t;if(this.emit("change",t)===false){return this}this.goRef();return this},goIpt:function(){var t=parseInt(this.$txtIpt.value.trim());if(isNaN(t)||t<1){this.goNav(1);return this}if(this.pCount<t){this.goNav(this.pCount)}this.goNav(t)},goRef:function(t){if(this.wCot){if(t){if(typeof f[t]=="function"){f[t].call(this)}return this}t=this.deploy;for(var i=0;i<t.length;i+=1){if(typeof f[t[i]]=="function"){f[t[i]].call(this)}}}return this},write:function(t,i){t=this.wCot=s(t);if(i){this.deploy=i}else{i=this.deploy}for(var r=0;r<i.length;r+=1){if(typeof i[r]=="string"){t.appendChild(p[i[r]].call(this));f[i[r]].call(this)}else{t.appendChild(i[r].call(this))}}return this}},function(){this.pCount=1;this.pCurr=1;this.pRank=10;this.deploy=["first","previous","txtRank","next","last"];if(arguments.length>0){this.set.apply(this,arguments)}});i.version="1.0.0";i.create=function(){var t=new c;if(arguments.length){t.set.apply(t,arguments)}return t}});