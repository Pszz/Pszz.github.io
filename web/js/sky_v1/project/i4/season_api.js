window.api||(window.api={}),api.data||(api.data={}),api.config||(api.config={}),window.console||(window.console={log:function(){}}),String.Config={uniRe:"**",uniExp:/[*]{2}/g,uniRemove:/[*]/g},String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s\s*$/,"")},String.prototype.htmlEncode=function(e){return(e?this.uniLeft(30,".."):this).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&#34;").replace(/\'/g,"&#39;")},String.prototype.htmlEncodeBr=function(e){return this.htmlEncode(e).replace(/\n/g,"<br />")},Date.prototype.format=function(e){return(e||"YYYY-MM-DD").replace(/YYYY/g,this.getFullYear()).replace(/YY/g,String(this.getYear()).slice(-2)).replace(/MM/g,("0"+(this.getMonth()+1)).slice(-2)).replace(/M/g,this.getMonth()+1).replace(/DD/g,("0"+this.getDate()).slice(-2)).replace(/D/g,this.getDate()).replace(/hh/g,("0"+this.getHours()).slice(-2)).replace(/h/g,this.getHours()).replace(/mm/g,("0"+this.getMinutes()).slice(-2)).replace(/m/g,this.getMinutes()).replace(/ss/g,("0"+this.getSeconds()).slice(-2)).replace(/s/g,this.getSeconds())},api.login=function(e){var t=api.config.login_href||api.config.path+"page/user/login.html";-1==document.location.pathname.indexOf(t)&&(document.location.href=t+(t.indexOf("?")>-1?"&":"?")+"href="+encodeURIComponent(e||document.location.href))},void function(){function e(){var e=document.getElementById("__loading_");if(!e)if("none"!=i.getData("load")){e=document.createElement("div"),e.id="__loading_",e.style.cssText=" position: fixed; width: 100%; text-align: center; padding: 2px 0;top:0; height: 100%; background-color: rgba(0, 0, 0, 0.1); z-index: 9999; display:none;",e.innerHTML='<img style="margin-top:300px;" src="'+i.path+'css/img/loading.gif" />',document.body.appendChild(e);var t=0;api.openLoad=function(){t+=1,1==t&&(e.style.display="block")},api.closeLoad=function(){t-=1,0==t&&(e.style.display="none"),t=Math.max(t,0)}}else api.openLoad=api.closeLoad=function(){}}function t(){sky.loadJS("//hm.baidu.com/hm.js?27fff5ed0673fe50436b520fe6f1d8c0")}function n(){var e=i.getData("js");if("none"!=e){var n=document.location.pathname.replace(/\/+$/,"/index.html").replace(/(\/[^\/]*)$/,"/script$1").replace(/\.[^.]*$/,i.jsSuffix||".js");n=e?/,$/.test(e)?e+n:e:n;var e=n?n.split(","):[];e.length&&(e.push(t),sky.use.apply(sky,e))}else t()}function o(){e(),n()}var i=api.config;i.version_sky&&(sky.config.version=i.version_sky),i.versions&&sky.extra(i.versions,sky.config.versions),i.alias&&sky.extra(i.alias,sky.config.alias),api.Event=new sky.EventEmitter;var a=0;api.getServerTime=function(){return new Date((new Date).getTime()-a)},sky.on_connect_ajax=function(e){sky.extra({onsend:function(){api.openLoad()},oncomplete:function(){return api.closeLoad(),void 0===a&&(a=(new Date).getTime()-new Date(this.getResponseHeader("Date")).getTime()),0==this.status?!1:void 0},oncensor:function(){var e=this.status,t="后台接口出错了";if(this.resultCode=-1*e,this.resultText="",!this.timeout&&e>=200&&300>e||304===e||1223===e){var n=this.responseJSON;if(n){if(void 0===n.errno||0==n.errno)return this.resultCode=0,!0;this.resultCode=n.errno,n.errmsg&&(t=n.errmsg)}}return this.resultText=t,t+"["+this.resultCode+"]"},autoLogin:!0},e.BaseClass.prototype)},document.attachEvent?document.attachEvent("onreadystatechange",function(){("complete"==document.readyState||"loaded"==document.readyState)&&o()}):document.addEventListener("DOMContentLoaded",o,!1)}();