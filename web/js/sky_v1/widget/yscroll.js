sky.define("./widget/yscroll",["dom"],function(e){function t(e){if(!(e.isMoveing||e.$desCot.scrollHeight-e.$desCot.offsetHeight<=0)){e.isMoveing=!0;var t=l.getEvent(),o=t.clientY-(parseInt(e.$rplate.style.top)||0),a=l.height(e.$rcon)-l.height(e.$rplate);l.bindCapture(s,"vmove",n,e,o,a),l.bindCapture(s,"vup",i,e)}}function n(e,t,n){var i=l.getEvent(),o=i.clientY-t,a=e.$desCot;o=0>=o?0:o>=n?n:o,e.$rplate.style.top=o+"px",a.scrollTop=Math.ceil((a.scrollHeight-a.offsetHeight)*(o/n)),window.getSelection?window.getSelection().removeAllRanges():s.selection.empty()}function i(e){e.isMoveing&&(l.unbind(s,"vup",i),l.unbind(s,"vmove",n),e.isMoveing=!1)}function o(){var e=this.$desCot;e.scrollTop+=this.arrow,this.$rplate.style.top=Math.ceil(e.scrollTop/(e.scrollHeight-e.offsetHeight)*(l.height(this.$rcon)-l.height(this.$rplate)))+"px"}function a(e){var t=e.$desCot;if(!(e.isMoveing||e.arrowItv||t.scrollHeight-t.offsetHeight<=0)){var n=l.getEvent(),i=n.wheelDeltaFlg;e.arrow=e.wheelNum*(i?1:-1),n.stopPropagation(),e.arrowMove()}}function r(e,t){var n=e.$desCot;e.arrowItv||n.scrollHeight-n.offsetHeight<=0||(window.captureEvents?window.captureEvents(Event.MOUSEMOVE):this.setCapture&&this.setCapture(),e.arrow=e.wheelNum*t,e.arrowMove(),e.arrowItv=setInterval(e.arrowMove,200))}function c(e){e.arrowItv&&(window.releaseEvents?window.releaseEvents(Event.MOUSEMOVE):this.releaseCapture&&this.releaseCapture(),clearInterval(e.arrowItv),e.arrowItv=null)}var s=document,l=e("dom"),u="sky_yscroll",d=sky.extend({reCountPlate:function(e){var t=this.$desCot,n=t.scrollHeight,i=t.offsetHeight,o=this.$rplate.style;if(0>=n-i)o.display="none";else{e||(e=0);var a=parseInt(Math.max(i/n*this.$rcon.offsetHeight,13));e===!0?t.scrollTop=0:t.scrollTop+=e,o.height=a+"px",o.display="block",o.top=Math.min(Math.ceil(t.scrollTop/(t.scrollHeight-t.offsetHeight)*(l.height(this.$rcon)-a)),this.$rcon.offsetHeight-a)+"px"}},show:function(){return l.bind(this.$desCot,"mousewheel",a,this),l.bind(this.$rCot,"mousewheel",a,this),l.bind(this.$rplate,"vdown",t,this),l.bind(this.$rup,"vdown",r,this,-1),l.bind(this.$rdown,"vdown",r,this,1),l.bind(this.$rup,"vup",c,this),l.bind(this.$rdown,"vup",c,this),this.$rCot.style.display="block",this.$desCot.scrollTop=0,this.$rplate.style.top="0px",this.reCountPlate(),this},hidden:function(){return l.unbind(this.$desCot,"mousewheel",a),l.unbind(this.$rCot,"mousewheel",a),l.unbind(this.$rplate,"vdown",t),l.unbind(this.$rup,"vdown",r),l.unbind(this.$rdown,"vdown",r),l.unbind(this.$rup,"vup",c),l.unbind(this.$rdown,"vup",c),this.$rcot.style.display="none",this}},function(e,t,n){this.$desCot=l(t),this.$rCot=l(e);for(var i,a=this.rCot.getElementsByTagName("*"),r=0;r<a.length;r+=1)(i=a[r].getAttribute(u))&&(this["$r"+i]=a[r]);this.arrowMove=L.bind(o,this),6==sky.IE?this.$rplate.setAttribute("href","javascript:;"):this.$rplate.removeAttribute("href"),this.wheelNum=n||30});return d.version="1.0.0",d});