sky.define("./dom/dom",function(){function $$(t){return"string"==typeof t?document.getElementById(t):t}function $(t,e){var n=$$(t);return"function"==typeof e?e.call(n||!1):n}function trim(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}$.version="1.0.0";var soleCount=Math.round(100*Math.random()),getSole=$.getSole=function(){var t=soleCount+=1,e=Math.round(26*Math.random()+10).toString(36);return e+t},Cache=$.Cache=sky.extend({get:function(t){var e="string"==typeof t?t:t.id;return this.data[e]||null},append:function(t,e){var n="string"==typeof t?t:t.id;return n||(n=this.create(),t.id=n),this.data[n]=e,this},remove:function(t){var e="string"==typeof t?t:t.id,n=this.data[e];return delete this.data[e],n},has:function(t){var e="string"==typeof t?t:t.id;return this.data[e]?!0:!1},create:function(){var t,e;do t=this.prefix+getSole(),e=$(t);while(e);return t}},function(t){this.prefix=t||Cache.prefix,this.data={}});Cache.prefix="_sky_dom_id_";var doc=document,toString=Object.prototype.toString;$.clearSelection=function(){window.getSelection?window.getSelection().removeAllRanges():document.selection.empty()},$.get=function(){function t(u,s){var l,f=[];if(u=trim(u).replace(e,function(t,e,n,r){for(var i=n.split(/[\s*,\s*]/),o=f.$={},c=0;c<i.length;c+=1)f.push(o[i[c]]=$(e+i[c]+r));return l=!0,""}),l)return f;if(u=trim(u).replace(r,function(e,n){var r=doc.getElementsByName(n);return r.length&&t.filterArray(r,null,f),l=!0,""}),l)return f;var d=" ";if(u=u.replace(n,function(t,e,n){return d=!e||n?n.indexOf(">")>-1?">":" ":"",e&&(s=$(e)),""}),""==d)return s?[s]:[];var p={};return u=u.replace(i,function(t,e){return e&&"*"!=e&&(p.tag=[e]),""}),">"==d?f=(s||doc.body).childNodes:(f=(s||doc).getElementsByTagName(p.tag?p.tag[0]:"*"),delete p.tag),u=u.replace(o,function(t,e){return p.className=[e],""}),u=u.replace(c,function(t,e,n,r){return p.att=[e,n,r],""}),u.replace(a,function(t,e){for(var n,r=e.split(":"),i=0,o=/^(\w+)(?:\(([\w,]*)\))?$/;i<r.length;i+=1)(n=r[i].match(o))&&(p[n[1]]=n[2].split(","));return""}),t.filterArray(f,p)}var e=/^#([\w\u00c0-\uFFFF\-]*)\[([\-\w,]+)\]([\w\u00c0-\uFFFF\-]*)/,n=/^(?:#([\w\u00c0-\uFFFF\-]+))?([ >]*)/,r=/^\[name=([\w\u00c0-\uFFFF\-]+)\]/,i=/^([a-zA-Z]+[a-zA-Z:]*|\*)/,o=/^\.([\w\u00c0-\uFFFF\-]+)/,c=/^\[([\w\u00c0-\uFFFF\-]+)([\^!\$\*]*=)*([\w\u00c0-\uFFFF\-]*)\]/,a=/^:([\w:\(\),]+)/;return t.filterArray=function(e,n,r){r||(r=[]);for(var i,o=0,c=e.length;c>o;o+=1)1==e[o].nodeType&&(i=!0,sky.forEach(n,function(n,r){return t.filter[r].apply(e[o],n)?void 0:i=!1}),i&&r.push(e[o]));return r},t.filter={tag:function(t){return this.tagName==t.toLocaleUpperCase()},className:function(t){return(" "+this.className+" ").indexOf(" "+t+" ")>-1},att:function(t,e,n){var r=null!=this[t]?this[t]:this.getAttribute(t);switch(e||""){case"":return null!=r;case"=":return r==n;case"!=":return r!=n;case"^=":return 0==r.indexOf(n);case"$=":return r.slice(-1*n.length)==n;case"*=":return r.indexOf(n)>-1}return!1}},t}(),$.getEvent=function(t){if(t=t||window.event||function(t){return t[t.length-1]}(arguments.callee.caller.arguments),!t)return null;if(null==t.clientX){var e=t.targetTouches&&t.targetTouches[0]?t.targetTouches:t.changedTouches;e&&e[0]&&(t.clientX=e[0].clientX,t.clientY=e[0].clientY)}return t.code=t.charCode||t.keyCode||t.which,null==t.charCode&&(t.charCode="keypress"==t.type?t.keyCode:0),null==t.eventPhase&&(t.eventPhase=2),null==t.isChar&&(t.isChar=t.charCode>0),null==t.pageX&&(t.pageX=t.clientX+doc.body.scrollLeft),null==t.pageY&&(t.pageY=t.clientY+doc.body.scrollTop),null==t.preventDefault&&(t.preventDefault=function(){this.returnValue=!1}),null==t.stopPropagation&&(t.stopPropagation=function(){this.cancelBubble=!0}),null==t.target&&(t.target=t.srcElement),null==t.time&&(t.time=(new Date).getTime()),null!=t.relatedTarget||"mouseout"!=t.type&&"mouseleave"!=t.type||(t.relatedTarget=t.toElement),null!=t.relatedTarget||"mouseover"!=t.type&&"mouseenter"!=t.type||(t.relatedTarget=t.fromElement),("mousewheel"==t.type||"DOMMouseScroll"==t.type)&&(null==t.wheelDelta&&(t.wheelDelta=-40*t.detail),t.wheelDeltaFlg=t.wheelDelta<0),t};var domCache={},create=$.create=function(t,e,n,r){var i;if("string"==typeof t)"text"==e?(i=doc.createTextNode(t),r=n):(e=e||{},t=t.toLowerCase(),sky.IE&&sky.IE<9&&(e.name||e.checked||e.hidefocus)&&(t="<"+t,e.name&&(t=t+' name="'+e.name+'"',delete e.name),e.checked&&(t+=' checked="checked"',delete e.checked),e.hidefocus&&(t+=' hidefocus="true"',delete e.hidefocus),t+=" >"),domCache[t]||(domCache[t]=doc.createElement(t)),i=domCache[t].cloneNode(!1),"string"==typeof n||"number"==typeof n?i.innerHTML=n:"[object Array]"==toString.call(n)&&create(n,i),$.attr(i,e));else if("[object Array]"==toString.call(t)){if("string"==typeof t[0])i=create.apply($,t);else{i=[];for(var o=0;o<t.length;o+=1)i.push(create.apply($,t[o]))}r=e}return r&&$.append(r,i),i};$.css=function(t,e,n){return t=$$(t),"string"==typeof e?"opacity"==e?$.opacity(t,n):("float"==e&&(e=sky.IE?"styleFloat":"cssFloat"),e=e.replace(/\-([a-z])/g,function(){return arguments[1].toUpperCase()}),null==n?t.style[e]||(t.currentStyle?t.currentStyle[e]:t.ownerDocument.defaultView.getComputedStyle(t,null)[e]):(t.style[e]=n,this)):(sky.forEach(e,function(e,n){$.css(t,n,e)}),this)},$.opacity=sky.IE&&sky.IE<9?function(t,e){t=$$(t);var n,r=/opacity=([^)]*)/,i=/alpha\([^)]*\)/,o=t.style;if(null==e)return n=o.filter||t.currentStyle.filter||"",n&&n.indexOf("opacity=")>=0?parseFloat(r.exec(n)[1])/100:1;var c=parseInt(e,10)+""=="NaN"?"":"alpha(opacity="+100*e+")";return n=o.filter||"",o.filter=i.test(n)?n.replace(i,c):c,this}:function(t,e){return null==e?(e=t.style.opacity||(t.currentStyle?t.currentStyle.opacity:t.ownerDocument.defaultView.getComputedStyle(t,null).opacity),""==e?1:e):(t.style.opacity=e,this)},void function(){function t(t,e){var n={};return sky.forEach(e,function(e,r){n[r]=$.css(t,r),$.css(t,r,e)}),n}function e(e,n,r,i){var o=e["offset"+n];if(0==o){var c=t(e,{position:"absolute",visibility:"hidden",display:"block"});o=e["offset"+n],t(e,c)}var a;if(r)for(a=0;a<r.length;a+=1)o-=parseFloat($.css(e,r[a]))||0;if(i)for(a=0;a<i.length;a+=1)o+=parseFloat($.css(e,i[a]))||0;return o}$.width=function(t,n){return t=$$(t),null==n?(n=$.css(t,"width"),n&&/px$/.test(n)?parseInt(n)||0:e(t,"Width",["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"])):(t.style.width="number"==typeof n?n+"px":n,this)},$.height=function(t,n){return t=$$(t),null==n?(n=$.css(t,"height"),n&&/px$/.test(n)?parseInt(n)||0:e(t,"Height",["paddingTop","paddingBottom","borderTopWidth","borderBottomWidth"])):(t.style.height="number"==typeof n?n+"px":n,this)},$.offset=function(e,n){e=$$(e);var r,i={},o=e.style.display;if("none"==o&&(r=t(e,{position:"absolute",visibility:"hidden",display:"block"})),2!=n)if(i.left=0,i.top=0,e.getBoundingClientRect){var c=e.getBoundingClientRect(),a=doc.body,u=doc.documentElement,s=u.clientTop||a.clientTop||0,l=u.clientLeft||a.clientLeft||0,f=1;if(a.getBoundingClientRect){var d=a.getBoundingClientRect();f=(d.right-d.left)/a.clientWidth}f>1&&(s=0,l=0),i.top=c.top/f+(window.pageYOffset||u&&u.scrollTop/f||a.scrollTop/f)-s,i.left=c.left/f+(window.pageXOffset||u&&u.scrollLeft/f||a.scrollLeft/f)-l}else for(var p=e;p.offsetParent;)i.left+=p.offsetLeft-p.scrollLeft,i.top+=p.offsetTop-p.scrollTop,p=p.offsetParent;return 1!=n&&(i.width=e.offsetWidth,i.height=e.offsetHeight),r&&t(e,r),i}}(),$.toggleClass=function(t,e,n){if(t=$$(t),e=trim(e),!e)return this;if(n&&!t.className)return t.className=e,this;if(n===!1&&!t.className)return this;for(var r=" "+trim(t.className).replace(/\s+/g," ")+" ",i=e.split(/\s+/),o=0;o<i.length;o+=1)r.indexOf(" "+i[o]+" ")>=0?n||(r=r.replace(" "+i[o]+" "," ")):(n||null==n)&&(r+=i[o]+" ");return t.className=trim(r),this},$.addClass=function(t,e){return $.toggleClass(t,e,!0),this},$.hasClass=function(t,e){t=$$(t);for(var n=" "+trim(t.className).replace(/\s+/g," ")+" ",r=trim(e).split(/\s+/),i=0;i<r.length;i+=1)if(-1==n.indexOf(" "+r[i]+" "))return!1;return!0},$.removeClass=function(t,e){return $.toggleClass(t,e,!1),this},$.html=function(t,e){return t=$$(t),null==e?t.innerHTML.replace(/\s*[iI][dD]=(['"]*)_sky_dom_id_\w+\1\s*/g," "):(t.innerHTML=e,this)};var domText=sky.IE?"innerText":"textContent";$.text=function(t,e){return t=$$(t),null==e?t[domText]:(t[domText]=e,this)},$.clear=function(t){for(t=$$(t);t.childNodes.length;)t.removeChild(t.lastChild);return this},$.append=function(t,e){if(t=$$(t),"[object Array]"==toString.call(e)){for(var n=0;n<e.length;n+=1)$.append(t,e[n]);return this}return t.appendChild(e),this},void function(){function t(t,e,r){if(i[t])return i[t](e,r);var c;if(n[t])return e?(c="_sky_dom_"+t+"_",r&&!e[c]&&(e[c]=function(r){var i=n[t],o=(r||window.event).keyCode;return"function"==typeof i&&i(o)?e.call(this,r):i==o?e.call(this,r):void 0}),["keypress",e[c]||e]):"keypress";if(!sky.IE&&("mouseenter"==t||"mouseleave"==t))return e?(c="_sky_dom_mouse_el_",r&&null==e[c]&&(e[c]=function(t){var n=t.relatedTarget;!n||8&n.compareDocumentPosition(this)||e.call(this,t)}),["mouseenter"==t?"mouseover":"mouseout",e[c]||e]):"mouseenter"==t?"mouseover":"mouseout";if(sky.Firefox&&"mousewheel"==t)return e?["DOMMouseScroll",e]:"DOMMouseScroll";for(var a=0;a<o.length;a+=1)if(c=o[a](t,e,r))return c;return e?[t,e]:t}function e(t,e,n,r,i,o){if(n){var a;c.has(t)?a=c.get(t):(a=[],c.append(t,a)),o.unshift(t),o.unshift(r);var u=sky.bind.apply(t,o);return a.push([e,r,u,i]),u}var s=[];if(c.has(t))for(var l=c.get(t),f=0;f<l.length;)l[f][0]==e&&(null==r||r&&l[f][1]==r)?(s.push([l[f][2],l[f][3]]),l.splice(f,1)):f+=1;return s}var n=$.keypressConfig={vkeyenter:13,vkeybackspace:8,vkeyspace:32,vkeydel:46,vkeyleft:37,vkeyup:38,vkeyright:39,vkeydown:40},r=sky.isTouch?{vresize:"orientationchange",vclick:"mousedown",vdown:"touchstart",vmove:"touchmove",vup:"touchend"}:{vresize:"resize",vclick:"click",vdown:"mousedown",vmove:"mousemove",vup:"mouseup"},i=$.vEvents=sky.forEach(r,function(t){return function(e){return e?[t,e]:t}},{}),o=$.exEvents=[],c=new Cache;void function(){var e={className:"class",htmlFor:"for"};$.attr=function(r,o,c){if(r=$$(r),"string"==typeof o){if(!sky.IE&&e[o]&&(o=e[o]),null==c)return"style"==o?r.style.cssText:r[o]||r.getAttribute(o);if("style"==o)return"string"==typeof c?r.style.cssText=c:$.css(r,c),this;if("function"==typeof c&&(/^on/.test(o)||n[o]||i[o])){var a=t(n[o]||i[o]?o:o.replace(/^on/,""),c,!0);return r["on"+a[0]]=a[1],this}return"className"==o||"function"==typeof c?(r[o]=c,this):c===!1?(r.removeAttribute(o),this):(r.setAttribute(o,c),this)}return sky.forEach(o,function(t,e){$.attr(r,e,t)}),this}}();var a=doc.addEventListener?function(t,e,n,r){t.addEventListener(e,n,!!r)}:function(t,e,n,r){t.attachEvent("on"+e,n),r&&doc.documentElement.setCapture()},u=doc.removeEventListener?function(t,e,n,r){t.removeEventListener(e,n,!!r)}:function(t,e,n,r){t.detachEvent("on"+e,n),r&&doc.documentElement.releaseCapture()};$.appendEvent=function(e,n,r,i){e=$$(e);var o=t(n,r,!0);return a(e,o[0],o[1],i),this},$.removeEvent=function(e,n,r,i){e=$$(e);var o=t(n,r);return u(e,o[0],o[1],i),this},$.onec=function(t,e,n,r){return $.appendEvent(t,e,function(){n.apply(this,arguments),$.removeEvent(t,e,arguments.callee,r)},r),this},$.on=function(e,n,r){e=$$(e);var i=t(n||"click",r,!0);return e["on"+i[0]]=i[1],this},$.emit=doc.createEvent?function(e,n,r){e=$$(e);var i,o=n||"click";return i=doc.createEvent("HTMLEvents"),i.initEvent(t(o),!0,!0),r&&sky.extra(r,i),e.dispatchEvent(i),this}:function(e,n,r){e=$$(e);var i,o=n||"click";return i=doc.createEventObject(),r&&sky.extra(r,i),e.fireEvent("on"+t(o),i),this},$.bind=function(n,r,i){n=$$(n);var o=t(r,i,!0),c=e(n,r,!0,o[1],!1,Array.prototype.slice.call(arguments,3));return a(n,o[0],c),this},$.bindCapture=function(n,r,i){n=$$(n);var o=t(r,i,!0),c=e(n,r,!0,o[1],!0,Array.prototype.slice.call(arguments,3));return a(n,o[0],c),this},$.unbind=function(n,r,i){n=$$(n);for(var o=i?t(r,i,!1):[t(r,i,!1),null],c=e(n,r,!1,o[1]),a=0;a<c.length;a+=1)u(n,o[0],c[a][0],c[a][1]);return this},$.vclick=function(t,e,n){"function"==typeof e?$.appendEvent(t,"vclick",e,n):$.emit(t,"vclick",e)}}(),$.skyLive=function(t,e,n){n||(n="vclick");var r=$(t);$.appendEvent(r,n,function(){for(var t=$.getEvent(),n=t.target;n&&n!=r;){var i=n.getAttribute("sky-fn"),o=n.getAttribute("sky-data");if(i||o){var c=e;if(null!=i&&(c=e[i]),c){var a=[t];null!=o&&a.unshift(o);var u=c.apply(n,a);if(u===!1)break}}n=n.parentNode}})};var expand=$.expand={get:function(i){if("number"==typeof i)return sky.extra(expand,[this[i]]);for(var n=0,nl=this.length,r=[],o={},m;nl>n;n+=1)m=eval(i),this[m]&&!o[m]&&r.push(o[m]=this[m]);return sky.extra(expand,r)},wipe:function(i){for(var n=0,nl=this.length;nl>n;n+=1)this[eval(i)]=null;for(n=0;nl>n;)this[n]?n+=1:this.splice(n,1);return this},forEach:function(){for(var t=arguments[0],e=0;e<this.length&&(arguments[0]=e,t.apply(this[e],arguments)!==!1);e+=1);return this},val:function(){for(var t,e,n,r=[],i=!0,o=!0,c=[],a=0;a<this.length;a+=1)r.push(trim(this[a].value||this[a].getAttribute("value")||"")),e=this[a].nodeName.toUpperCase(),n=this[a].type.toUpperCase(),i&&(i="INPUT"==e&&"RADIO"==n,i&&(o=!1,this[a].checked&&(t=this[a].value))),o&&(o="INPUT"==e&&"CHECKBOX"==n,o&&this[a].checked&&c.push(this[a].value));return i?t:o?c:r}},expandOne=$.expandOne={};return $.setExpand=function(t,e){e||(e=$[t]),expand[t]=function(){Array.prototype.unshift.call(arguments,null);for(var t=0,n=this.length,r=[];n>t;t+=1)arguments[0]=this[t],r[t]=e.apply(this,arguments);return r[0]==this?this:r},expandOne[t]=function(){return this[0]?(Array.prototype.unshift.call(arguments,this[0]),e.apply(this,arguments)):this}},sky.forEach(["attr","css","opacity","width","height","html","text","clear","offset","bind","unbind","appendEvent","removeEvent","on","emit","addClass","removeClass","toggleClass","hasClass","skyLive","vclick"],function(t){$.setExpand(t)}),$.query=function(t,e){return sky.extra(expand,"string"==typeof t?$.get(t,e):"[object Array]"==toString.call(t)?t:[t])},$.queryOne=function(t,e){return"string"==typeof t?sky.extra(expandOne,$.get(t,e).splice(0,1)):"[object Array]"==toString.call(t)?sky.extra(expandOne,t.splice(0,1)):sky.extra(expandOne,[t])},$});